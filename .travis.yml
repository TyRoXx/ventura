language: cpp
os:
 - linux
sudo: false
notifications:
 email:
  on_success: change # [always|never|change] # default: change
  on_failure: always # [always|never|change] # default: always

addons:
  apt:
    sources:
    - boost-latest
    - ubuntu-toolchain-r-test
    packages:
    - g++-5
    - g++-4.9
    - g++-4.8
    - g++-4.7
    - g++-4.6
    - libboost1.55-all-dev
    
env:
 - CPP=g++-5   PEDANTIC=ON  NO_EXCEPTIONS=ON  NO_RTTI=OFF BUILD_TYPE=Release
 - CPP=g++-5   PEDANTIC=ON  NO_EXCEPTIONS=OFF NO_RTTI=ON  BUILD_TYPE=Release
 - CPP=g++-5   PEDANTIC=ON  NO_EXCEPTIONS=OFF NO_RTTI=OFF BUILD_TYPE=Release
 - CPP=g++-5   PEDANTIC=ON  NO_EXCEPTIONS=OFF NO_RTTI=OFF BUILD_TYPE=Debug
 - CPP=g++-4.9 PEDANTIC=OFF NO_EXCEPTIONS=OFF NO_RTTI=OFF BUILD_TYPE=Release
 - CPP=g++-4.9 PEDANTIC=OFF NO_EXCEPTIONS=OFF NO_RTTI=OFF BUILD_TYPE=Debug
 - CPP=g++-4.8 PEDANTIC=OFF NO_EXCEPTIONS=OFF NO_RTTI=OFF BUILD_TYPE=Release
 - CPP=g++-4.8 PEDANTIC=OFF NO_EXCEPTIONS=OFF NO_RTTI=OFF BUILD_TYPE=Debug
 - CPP=g++-4.7 PEDANTIC=OFF NO_EXCEPTIONS=OFF NO_RTTI=OFF BUILD_TYPE=Debug
 - CPP=g++-4.7 PEDANTIC=OFF NO_EXCEPTIONS=OFF NO_RTTI=OFF BUILD_TYPE=Release
 - CPP=g++-4.6 PEDANTIC=OFF NO_EXCEPTIONS=OFF NO_RTTI=OFF BUILD_TYPE=Debug
 - CPP=g++-4.6 PEDANTIC=OFF NO_EXCEPTIONS=OFF NO_RTTI=OFF BUILD_TYPE=Release

before_install:
 - git submodule update --init --recursive

script:
 - mkdir build
 - cd build
 - CXX=$CPP cmake .. -DVENTURA_PEDANTIC=$PEDANTIC -DSILICIUM_NO_EXCEPTIONS=$NO_EXCEPTIONS -DCMAKE_BUILD_TYPE=$BUILD_TYPE -DVENTURA_TESTS_RUNNING_ON_TRAVIS_CI=ON -DVENTURA_NO_RTTI=$NO_RTTI || exit 1
 - cmake --build . -- -j2 || exit 1
 - cd test
 - if [ $NO_RTTI != "ON" ]; then
     ./unit_test || exit 1;
   fi
